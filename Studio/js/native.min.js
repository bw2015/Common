!function(){let studio=this.webstudio={version:"1.0.0",author:"529422872adfff401b901b8b6c7ca5114ee95e2b"};let typeOf=this.typeOf=function(item){if(item===null)return"null";if(item===undefined)return"undefined";if(item.nodeName){if(item.nodeType===1)return"element";if(item.nodeType===3)return/\S/.test(item.nodeValue)?"textnode":"whitespace"}if(typeof item==="object"){if(item instanceof Array)return"array";if(item instanceof Date)return"date";if(item instanceof File)return"file";if(item instanceof Blob)return"blob";if(item instanceof RegExp)return"regex";if(item instanceof Boolean)return"bool"}return typeof item};let extend=studio.extend=function(){let args=arguments;if(!args||!args.length)return null;if(args.length===1)return args[1];let result=new Object;for(let index=0;index<args.length;index++){if(!args[index])continue;for(let key in args[index]){result[key]=args[index][key]}}return result}}.apply(window);if(!window["Fx"]){window["Fx"]=new Object}!function(){Array.prototype.any=function(predicate){let list=this;for(let index=0;index<list.length;index++){if(predicate.apply(list,[list[i]])){return true}}return false};Array.prototype.take=function(count){let array=this;return array.filter((item,index)=>index<count)};Array.prototype.take=function(count){let array=this;return array.filter((item,index)=>item>=count)}}();!function(){Date.prototype.ToString=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in e)e.hasOwnProperty(n)&&new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return t}}();!function(){Element.prototype.getParent=function(selectors,parentDom){let elem=this,parent=elem.parentElement;while(parent){if(parent.matches(selectors))return parent;parent=parent.parentElement}return null};Element.prototype.get=function(attributeName){let elem=this;return elem.getAttribute(attributeName)};Element.prototype.set=function(attributeName,value){let elem=this;elem.setAttribute(attributeName,value)};Element.prototype.getChild=function(selectors){let elem=this;return elem.querySelector(selectors)};Element.prototype.addEvent=function(eventName,arg0,arg1){let elem=this,selectors=null,listener=null;if(typeOf(arg0)==="string"&&typeOf(arg1)==="function"){selectors=arg0;listener=arg1;elem.addEventListener(eventName,function(e){let currentTarget=null;for(let index=0;index<e.path.indexOf(elem);index++){if(e.path[index].matches(selectors)){currentTarget=e.path[index];break}}if(!currentTarget)return false;e.current=currentTarget;listener.apply(this,[e])})}else if(typeOf(arg0)==="function"){listener=arg0;elem.addEventListener(eventName,function(e){e.current=elem;listener.apply(this,[e])})}};Element.prototype.addEvents=function(events,selectors){let elem=this;for(let eventName in events){let listener=events[eventName];if(selectors){elem.addEvent(eventName,selectors,listener)}else{elem.addEvent(eventName,listener)}}};Element.prototype.html=function(html){let elem=this;if(html){elem.innerHTML=html;return html}return elem.innerHTML};Element.prototype.setData=function(name,data){let elem=this;if(!elem.data)elem.data=new Object;elem.data[name]=data;return elem.data};Element.prototype.getData=function(name){let elem=this;if(!elem.data)return null;return elem.data[name]};Element.prototype.getField=function(attributeName){if(!attributeName)attributeName="name";let elem=this,data={};elem.querySelectorAll("["+attributeName+"]").forEach(item=>{let name=item.getAttribute(attributeName);if(!name)return;switch(item.tagName){case"SELECT":case"TEXTAREA":data[name]=item.value;break;case"INPUT":switch(item.getAttribute("type")){case"radio":if(item.checked)data[name]=item.value;break;case"checkbox":if(item.checked){if(!data[name])data[name]=[];data[name].push(item.value)}break;default:data[name]=item.value;break}break}});for(var key in data){if(Array.isArray(data[key]))data[key]=data[key].join(",")}return data}}();!function(){class Request{constructor(options){this.options=webstudio.extend({headers:{"user-agent":navigator.userAgent}},options)}send(options){let t=this,headers=t.options.headers;if(options.headers){headers=webstudio.extend(headers,options.headers)}options=webstudio.extend(t.options,options);let body=options.data,type=options.type||"json";switch(type){case"json":options.method="POST";headers["content-type"]="application/json";if(typeOf(body)!=="string"){body=JSON.stringify(body)}break;case"form":options.method="POST";headers["content-type"]="application/x-www-form-urlencoded";if(typeof body!=="string"){let postData=[];for(let name in body){postData.push(name+"="+body[name])}body=postData.join("&")}break;case"file":options.method="POST";let formData=new FormData;for(let name in options.data){let data=options.data[name];if(data instanceof Blob){data=new window.File([data],name,{type:data.type})}formData.append(name,data)}body=formData;console.log(body);break;case"html":options.method="GET";headers["content-type"]="text/html";break}fetch(options.url,{body:body,cache:options.cache||"no-cache",credentials:options.credentials||"same-origin",headers:headers,method:options.method,mode:options.mede||"cors"}).then(response=>{try{options.complete&&options.complete(response)}catch(ex){throw ex}let contentType=response.headers.get("content-type");if(type==="json"||/.*\/json/i.test(contentType)){try{return response.json()}catch{return response.text()}}else{return response.text()}}).then(response=>{if(type==="html"){let parser=new DOMParser,doc=parser.parseFromString(response,"text/html");options.success&&options.success(response,doc)}else{options.success&&options.success(response)}}).catch(ex=>{options.catch&&options.catch(ex)||console.error(ex)})}post(options){let t=this;options=webstudio.extend({method:"POST",type:"form"},options);t.send(options)}file(options){let t=this;options=webstudio.extend({type:"file"},options);t.send(options)}html(options){let t=this;options=webstudio.extend({type:"html"},options);t.send(options)}blob(blob,fileName){let t=this,options=t.options;let file=new window.File([blob],fileName,{type:blob.type});let formData=new FormData;formData.append("file",file);options.loading&&options.loading();fetch(options.url,{method:"POST",body:formData}).then(response=>{options.complete&&options.complete();return response.json()}).then(json=>{options.success&&options.success(json)}).catch(ex=>{if(options.catch){options.catch(ex)}else{console.error(ex)}})}}Fx.Request=Request}();Fx.media=new Object;!function(ns){ns.getBlob=(video,type)=>{if(!type)type="image/png";let canvas=document.createElement("canvas");canvas.width=video.videoWidth;canvas.height=video.videoHeight;canvas.getContext("2d").drawImage(video,0,0,canvas.width,canvas.height);let strDataURL=canvas.toDataURL(type);let arr=strDataURL.split(","),arrMatch=arr[0].match(/:(.*?);/);if(!arrMatch)return null;let mime=arrMatch[1],bstr=atob(arr[1]),n=bstr.length,u8arr=new Uint8Array(n);while(n--){u8arr[n]=bstr.charCodeAt(n)}let blob=new Blob([u8arr],{type:mime});canvas.remove();canvas=null;return blob}}(Fx.media);